#!/bin/bash

CHANGELOG="/usr/local/share/proxmigrate/CHANGELOG.md"

if [[ ! -f "$CHANGELOG" ]]; then
  echo "‚ùå CHANGELOG.md nu a fost gasit la $CHANGELOG"
  exit 1
fi

if [[ "$1" == "--changelog" ]]; then
  echo -e "\nüìÑ \033[1;36mIstoric complet ProxMigrate\033[0m"
  cat "$CHANGELOG"
  exit 0
fi

VERSION=$(grep -m1 -oP '\[v[0-9]+\.[0-9]+\.[0-9]+\]' "$CHANGELOG" | tr -d '[]')
DATE=$(grep -m1 -oP '[0-9]{4}-[0-9]{2}-[0-9]{2}' "$CHANGELOG")

echo -e "üõ†Ô∏è ProxMigrate versiune: \033[1;36m$VERSION\033[0m"
echo -e "üóìÔ∏è  Ultima modificare:   \033[1;33m$DATE\033[0m"
echo -e "‚ÑπÔ∏è  Ruleaza \033[1mproxversion --changelog\033[0m pentru istoricul complet"
