#!/bin/bash

# Afiseaza versiunea ProxMigrate din cel mai recent tag Git
VERSION=$(git -C "$(dirname "$0")" describe --tags --abbrev=0 2>/dev/null)

if [[ -n "$VERSION" ]]; then
  echo "üß© ProxMigrate - Versiune: $VERSION"
else
  echo "‚ö†Ô∏è Versiune necunoscuta (fara tag Git)"
fi

# Arata changelog daca e apelat cu --changelog
if [[ "$1" == "--changelog" ]]; then
  echo ""
  echo "üìù CHANGELOG:"
  grep -A 20 "$VERSION" "$(dirname "$0")/../share/proxmigrate/CHANGELOG.md" | sed '/^$/q'
fi
